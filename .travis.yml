sudo: required
services:
- docker
- notifications: false

env:
  - RECIPE=scribus
  
before_install:
- # Install prerequisites for travis2github.py uploader
- wget -c https://raw.githubusercontent.com/probonopd/travis2github/master/travis2github.py
- wget -c https://raw.githubusercontent.com/probonopd/travis2github/master/magic.py
- sudo apt-get update -qq
- sudo apt-get install python-requests  python-chardet python-urllib3 python-six -qq
- ln -s /usr/lib/python2.7/dist-packages/six.py /usr/lib/python2.7/dist-packages/requests/ /usr/lib/python2.7/dist-packages/chardet/ /usr/lib/python2.7/dist-packages/urllib3/ .

script:
- mkdir -p ./out/
- wget https://raw.githubusercontent.com/probonopd/AppImages/master/recipes/$RECIPE/Recipe -O ./out/Recipe
- # docker --version
- # cat ${PWD}/out/Recipe
- # docker create -t -i probonopd/appimages:$RECIPE  /bin/bash -ex /out/Recipe
- # ID=$(docker ps -alq)
- # docker cp ./out $ID:/
- # docker start -a -i $ID
- docker run -i -v ${PWD}/out:/out probonopd/appimages:$RECIPE /bin/bash -ex /out/Recipe
- # docker cp $ID:/out/ .
- python travis2github.py out/*.AppImage
